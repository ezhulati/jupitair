import"./hoisted.FT4Uu3CM.js";async function s(){try{const n=await fetch("/api/reviews-aggregator");if(n.ok){const e=await n.json(),o=document.querySelector('script[type="application/ld+json"]');if(o){const r=JSON.parse(o.textContent);if(r["@graph"]){const t=r["@graph"].find(a=>a["@type"]==="HVACBusiness");if(t&&t.aggregateRating){t.aggregateRating.ratingValue=e.averageRating.toString(),t.aggregateRating.reviewCount=e.totalReviews.toString(),t.review&&e.reviews&&(t.review=e.reviews.slice(0,5).map(i=>({"@type":"Review",reviewRating:{"@type":"Rating",ratingValue:i.rating.toString(),bestRating:"5",worstRating:"1"},author:{"@type":"Person",name:i.author},datePublished:i.date,reviewBody:i.text,publisher:{"@type":"Organization",name:i.source==="google"?"Google":"Facebook"}})));const a=document.createElement("script");a.type="application/ld+json",a.textContent=JSON.stringify(r,null,2),o.parentNode.replaceChild(a,o),console.log("Schema updated with fresh review data:",{rating:e.averageRating,count:e.totalReviews})}}}}}catch(n){console.error("Failed to update schema with fresh reviews:",n)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{setTimeout(s,5e3)}):setTimeout(s,5e3);setInterval(s,36e5);
